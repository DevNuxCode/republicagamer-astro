---
import { getLangFromUrl, useTranslations } from '../i18n/utils';
const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const currentPath = Astro.url.pathname;
---

<nav class="w-full p-4 transition-colors duration-300">
  <div class="container mx-auto flex flex-col md:flex-row justify-between items-center gap-4">
    <div class="flex items-center space-x-2">
      <svg class="w-8 h-8" viewBox="0 0 24 24" fill="currentColor">
        <path d="M21 6H3c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm-10 7H8v3H6v-3H3v-2h3V8h2v3h3v2zm4.5 2c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm4-3c-.83 0-1.5-.67-1.5-1.5S18.67 9 19.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/>
      </svg>
      <a href={`/${lang}`} class="text-xl font-bold">LaRepublicaGamer</a>
    </div>

    <div class="flex items-center space-x-6">
      <div class="flex space-x-4">
        <a 
          href={`/${lang}`} 
          class={`hover:text-primary ${currentPath === `/${lang}` ? 'text-primary font-bold' : ''}`}
        >
          {lang === 'es' ? 'Inicio' : 'Home'}
        </a>
        <a 
          href={`/${lang}/videos`} 
          class={`hover:text-primary ${currentPath.includes('/videos') ? 'text-primary font-bold' : ''}`}
        >
          {lang === 'es' ? 'Videos' : 'Videos'}
        </a>
        <a 
          href={`/${lang}/blog`} 
          class={`hover:text-primary ${currentPath.includes('/blog') ? 'text-primary font-bold' : ''}`}
        >
          {lang === 'es' ? 'Noticias' : 'News'}
        </a>
      </div>

      <div class="flex items-center space-x-4">
        <select id="themeSelector" class="rounded px-2 py-1 bg-white dark:bg-gray-700">
          <option value="light">{t('nav.theme.light')}</option>
          <option value="dark">{t('nav.theme.dark')}</option>
          
        </select>
        <div class="space-x-2">
          <a href="/en" class={lang === 'en' ? 'font-bold' : ''}>EN</a>
          <a href="/es" class={lang === 'es' ? 'font-bold' : ''}>ES</a>
        </div>
      </div>
    </div>
  </div>
</nav>

<script>
  const themeSelector = document.getElementById('themeSelector');
  
  themeSelector?.addEventListener('change', (e) => {
    const theme = (e.target as HTMLSelectElement).value;
    document.documentElement.className = theme;
    localStorage.setItem('theme', theme);
  });

  // Load saved theme
  const savedTheme = localStorage.getItem('theme') || 'light';
  if (themeSelector) {
    themeSelector.value = savedTheme;
  }
  document.documentElement.className = savedTheme;
</script>